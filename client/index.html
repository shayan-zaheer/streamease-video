<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>StreamEase</title>
		<!-- link css -->
		<link rel="stylesheet" href="css/style.css" />
		<!-- link swiper css -->
		<link rel="stylesheet" href="css/swiper-bundle.min.css" />
		<!-- favicon -->
		<link rel="shortcut icon" href="img/favicon.png" type="image/x-icon" />
		<!-- box icons -->
		<link
			href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
			rel="stylesheet"
		/>
		<!-- Add modal CSS -->
	</head>
	<body>
		<!-- header -->
		<header>
			<!-- nav -->
			<div class="nav container">
				<!-- logo -->
				<a href="index.html" class="logo">Stream<span>Ease</span></a>

				<!-- search box -->
				<div class="search-box">
					<input
						type="search"
						name=""
						id="search-input"
						placeholder="Search movie"
					/>
					<i class="bx bx-search"></i>
				</div>

				<!-- user -->
				<a href="#" class="user">
					<img src="img/user.jpg" alt="" class="user-img" />
				</a>

				<!-- nav-bar -->
				<div class="navbar">
					<a href="#home" class="nav-link nav-active">
						<i class="bx bx-home"></i>
						<span class="nav-link-title">Home</span>
					</a>
					<a href="#popular" class="nav-link">
						<i class="bx bxs-hot"></i>
						<span class="nav-link-title">Trending</span>
					</a>
					<a href="#movies" class="nav-link">
						<i class="bx bx-compass"></i>
						<span class="nav-link-title">Explore</span>
					</a>
					<a href="#home" class="nav-link">
						<i class="bx bx-tv"></i>
						<span class="nav-link-title">Movies</span>
					</a>
					<a href="#home" class="nav-link">
						<i class="bx bx-heart"></i>
						<span class="nav-link-title">Favorite</span>
					</a>
				</div>
			</div>
		</header>

		<!-- home -->
		<section class="home container" id="home">
			<!-- home-img -->
			<img src="img/background.jpg" alt="" class="home-img" />
			<!-- home-text -->
			<div class="home-text">
				<h1 class="home-title">
					Hitman's Wife's <br />
					Bodyguard
				</h1>
				<p>Releasing on 10th April</p>
				<a href="#" class="watch-btn">
					<i class="bx bx-right-arrow"></i>
					<span>Watch the Trailer</span>
				</a>
			</div>
		</section>
		<!-- home end -->

		<!-- Popular Section Start-->
		<section class="popular container" id="popular">
			<!-- heading -->
			<div class="heading">
				<h2 class="heading-title">Popular Movies</h2>
				<!-- swiper btn -->
				<div class="swiper-btn">
					<div class="swiper-button-prev"></div>
					<div class="swiper-button-next"></div>
				</div>
			</div>
			<!-- content -->
			<div class="popular-content swiper">
				<div class="swiper-wrapper" id="popular-movies">
					<!-- Popular movies will be dynamically added here -->
				</div>
			</div>
		</section>
		<!-- Popular Section End-->

		<!-- Movies section Start -->
		<section class="movies container" id="movies">
			<div class="heading">
				<h2 class="heading-title">Movies and Shows</h2>
			</div>

			<!-- movies content -->
			<div class="movies-content" id="all-movies">
				<!-- All movies will be dynamically added here -->
			</div>
		</section>
		<!-- Movies section End -->

		<!-- next page -->
		<div class="next-page">
			<a href="#" class="next-btn">Next Page</a>
		</div>

		<!-- copyright -->
		<div class="copyright">
			<p>&#169; WebWar All rights reserved</p>
		</div>

		<div id="modal-container" class="modal">
			<div class="modal-content">
				<span class="close">&times;</span>
				<video id="modal-video" controls></video>
			</div>
		</div>

		<!-- link swiper js -->
		<script src="js/swiper-bundle.min.js"></script>
		<!-- link js -->
		<script src="js/main.js"></script>

		<script>
			window.addEventListener("DOMContentLoaded", (event) => {
				fetch("http://localhost:8000/movies")
					.then((response) => response.json())
					.then(data => {
						const popularMoviesContainer =
							document.getElementById("popular-movies");
						data.movies.forEach((movie) => {
							popularMoviesContainer.innerHTML += `
                            <div class="swiper-slide">
                        <div class="movie-box">
                            <img src="${movie.v_poster}" alt="" class="movie-box-img">
                            <div class="box-text">
                                <h2 class="movie-title">${movie.title}</h2>
                                <span class="movie-type">${movie.genre}</span>
                                <a href="play-page.html?id=${movie.id}" class="watch-btn play-btn" data-id="${movie.id}">
                                    <i class='bx bx-right-arrow'></i>
                                </a>
                            </div>
                        </div>
                    </div>
                            `;
						});

						// const playButtons =
						// 	document.querySelectorAll(".play-btn");
						// playButtons.forEach((button) => {
						// 	button.addEventListener("click", (event) => {
						// 		console.log(event);
						// 		event.preventDefault();
						// 		console.log("Play button clicked");

						// 		const videoUrl = button.dataset.videoUrl;
						// 		console.log(videoUrl);

						// 		const video =
						// 			document.getElementById("modal-video");
						// 		video.src = videoUrl;
						// 		video.controls = true;

						// 		const modalContent =
						// 			document.querySelector(".modal-content");
						// 		modalContent.innerHTML = "";
						// 		modalContent.appendChild(video);

						// 		const modal =
						// 			document.getElementById("modal-container");
						// 		modal.style.display = "flex";

						// 		video.play();
						// 	});
						// });
					})
					.catch((error) =>
						console.error("Error fetching movies:", error)
					);
			});
		</script>
	</body>
</html>
